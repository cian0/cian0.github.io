(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[685],{6238:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/retrospritesheeteditor",function(){return n(5087)}])},5087:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),i=n(7294),a=n(920),s=n.n(a),o=()=>{let[e,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(null),[c,d]=(0,i.useState)({x:0,y:0}),[h,u]=(0,i.useState)(!1),[m,v]=(0,i.useState)({x:0,y:0}),[p,g]=(0,i.useState)({width:200,height:200}),[x,f]=(0,i.useState)(!1),[w,_]=(0,i.useState)(50),[j,C]=(0,i.useState)(10),[E,S]=(0,i.useState)(!1),R=(0,i.useRef)(null),y=(0,i.useRef)(null),b=(0,i.useRef)(null);(0,i.useEffect)(()=>(L(),N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N),b.current&&cancelAnimationFrame(b.current)}),[o,c,x,n,e,w]),(0,i.useEffect)(()=>(document.addEventListener("mousemove",k),document.addEventListener("mouseup",P),document.addEventListener("touchmove",A),document.addEventListener("touchend",D),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",P),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",D)}),[h,m]);let N=()=>{let e=document.querySelector(".".concat(s().canvasContainer));if(e){let t=Math.min(e.clientWidth,400);g(e=>({...e,width:t,height:t}))}},L=()=>{let t=R.current;if(!t)return;let r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),o&&r.drawImage(o,c.x,c.y),x&&null!==n&&e[n]&&(r.globalAlpha=w/100,r.drawImage(e[n],0,0),r.globalAlpha=1)},F=e=>{let{name:t,value:n}=e.target;g(e=>({...e,[t]:parseInt(n)}))},I=(e,t)=>{if(o){u(!0);let n=R.current.getBoundingClientRect();v({x:e-n.left-c.x,y:t-n.top-c.y})}},k=e=>{O(e.clientX,e.clientY)},A=e=>{let t=e.touches[0];O(t.clientX,t.clientY)},O=(e,t)=>{if(h&&o){let n=R.current.getBoundingClientRect();d({x:e-n.left-m.x,y:t-n.top-m.y})}},P=()=>{u(!1)},D=()=>{u(!1)},X=r=>{t(e=>e.filter((e,t)=>t!==r)),n>=e.length-1&&a(e.length-2)};return(0,r.jsx)("div",{className:"retro-container ".concat(s().spritesheetEditor),children:(0,r.jsxs)("div",{className:"retro-post",children:[(0,r.jsx)("div",{className:"retro-header",children:"\uD83C\uDFAC Retro Spritesheet Editor \uD83D\uDDBCï¸"}),(0,r.jsx)("div",{className:"retro-section",children:(0,r.jsxs)("div",{className:s().editorContainer,children:[(0,r.jsx)("div",{className:s().canvasContainer,children:(0,r.jsx)("canvas",{ref:R,width:p.width,height:p.height,onMouseDown:e=>{I(e.clientX,e.clientY)},onTouchStart:e=>{let t=e.touches[0];I(t.clientX,t.clientY)}})}),(0,r.jsxs)("div",{className:s().controls,children:[(0,r.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files[0],n=new Image;n.onload=()=>{URL.revokeObjectURL(n.src),l(n),d({x:0,y:0})},n.src=URL.createObjectURL(t)},className:"retro-input"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"width",children:"Canvas Width:"}),(0,r.jsx)("input",{type:"number",id:"width",name:"width",value:p.width,onChange:F,className:"retro-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"height",children:"Canvas Height:"}),(0,r.jsx)("input",{type:"number",id:"height",name:"height",value:p.height,onChange:F,className:"retro-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"checkbox",id:"showOverlay",checked:x,onChange:e=>f(e.target.checked)}),(0,r.jsx)("label",{htmlFor:"showOverlay",children:"Show Overlay"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"overlayOpacity",children:"Overlay Opacity:"}),(0,r.jsx)("input",{type:"range",id:"overlayOpacity",min:"0",max:"100",value:w,onChange:e=>_(parseInt(e.target.value))})]}),(0,r.jsx)("button",{onClick:()=>{let n=document.createElement("canvas");n.width=p.width,n.height=p.height;let r=n.getContext("2d");r.fillStyle="black",r.fillRect(0,0,n.width,n.height),r.drawImage(R.current,0,0),t(e=>[...e,n]),a(e.length)},className:"retro-button",children:"Add Frame"}),(0,r.jsx)("button",{onClick:()=>{if(0===e.length){alert("Please add at least one frame before animating.");return}S(!0);let t=y.current;if(!t)return;let n=t.getContext("2d"),r=0,i=0,a=s=>{i||(i=s);let o=1e3/j,l=s-i;l>o&&(n.clearRect(0,0,t.width,t.height),n.drawImage(e[r],0,0,t.width,t.height),r=(r+1)%e.length,i=s-l%o),b.current=requestAnimationFrame(a)};b.current=requestAnimationFrame(a)},className:"retro-button",children:"Animate"})]})]})}),(0,r.jsx)("div",{className:s().framesContainer,children:e.map((e,t)=>(0,r.jsxs)("div",{className:s().framePreviewContainer,children:[(0,r.jsx)("canvas",{width:"100",height:"100",className:"".concat(s().framePreview," ").concat(t===n?s().active:""),onClick:()=>a(t),ref:t=>{t&&t.getContext("2d").drawImage(e,0,0,100,100)}}),(0,r.jsx)("button",{onClick:()=>X(t),className:s().deleteFrame,children:"X"})]},t))}),E&&(0,r.jsxs)("div",{className:s().animationContainer,children:[(0,r.jsx)("h3",{className:"retro-header",children:"Animation Preview"}),(0,r.jsx)("canvas",{ref:y,width:p.width,height:p.height}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fpsInput",children:"FPS:"}),(0,r.jsx)("input",{type:"number",id:"fpsInput",value:j,onChange:e=>C(parseInt(e.target.value)),min:"1",max:"60",className:"retro-input"})]})]})]})})},l=()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Spritesheet Editor"}),(0,r.jsx)(o,{})]})},920:function(e){e.exports={spritesheetEditor:"RetroSpritesheetEditor_spritesheetEditor__I20jJ",editorContainer:"RetroSpritesheetEditor_editorContainer__U_9nv",canvasContainer:"RetroSpritesheetEditor_canvasContainer__sA7Rx",controls:"RetroSpritesheetEditor_controls__YLH8B",framesContainer:"RetroSpritesheetEditor_framesContainer__TjRwH",framePreviewContainer:"RetroSpritesheetEditor_framePreviewContainer__cod9Z",framePreview:"RetroSpritesheetEditor_framePreview__RVrxf",active:"RetroSpritesheetEditor_active__LA9AG",deleteFrame:"RetroSpritesheetEditor_deleteFrame__uwHyb",animationContainer:"RetroSpritesheetEditor_animationContainer__VwEU0",debugInfo:"RetroSpritesheetEditor_debugInfo___gmRZ"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6238)}),_N_E=e.O()}]);