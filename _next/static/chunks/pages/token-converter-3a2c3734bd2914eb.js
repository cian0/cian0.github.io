(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{5074:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/token-converter",function(){return s(182)}])},182:function(e,t,s){"use strict";s.r(t);var n=s(5893),r=s(7294),o=s(1664),a=s.n(o),l=s(4755),c=s.n(l);t.default=()=>{let[e,t]=(0,r.useState)({}),[s,o]=(0,r.useState)(null),[l,i]=(0,r.useState)({message:"",type:""}),[d,u]=(0,r.useState)("crypto"),[h,m]=(0,r.useState)(""),[p,v]=(0,r.useState)([]),[k,x]=(0,r.useState)([{amount1:1,token1:"",amount2:"",token2:""}]),[f,g]=(0,r.useState)(new Set),[j,y]=(0,r.useState)([]),[_,N]=(0,r.useState)(""),[S,C]=(0,r.useState)("default"),[b,T]=(0,r.useState)({}),[P,E]=(0,r.useState)(!0);(0,r.useEffect)(()=>{{let e=localStorage.getItem("tokenConverter_customPairs");e&&x(JSON.parse(e));let t=localStorage.getItem("tokenConverter_history");t&&v(JSON.parse(t));let s=localStorage.getItem("tokenConverter_activeTab");s&&u(s)}},[]),(0,r.useEffect)(()=>{(async()=>{try{E(!0);let e=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&sparkline=false"),t=await e.json(),s={};t.forEach(e=>{s[e.id]=e.symbol.toUpperCase()}),T(s)}catch(e){console.error("Error fetching top tokens:",e),i({message:"Error loading tokens. Using default list.",type:"error"}),T({bitcoin:"BTC",ethereum:"ETH",ripple:"XRP",cardano:"ADA",solana:"SOL",dogecoin:"DOGE"})}finally{E(!1)}})()},[]);let w=function(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(e[t]&&e[t][s])return e[t][s];if(n.has(t))return null;if(n.add(t),e[t])for(let r in e[t]){let o=e[t][r],a=w(r,s,new Set(n));if(null!==a)return o*a}return null},A=()=>{let e=new Set,s={};k.forEach(t=>{let{amount1:n,token1:r,amount2:o,token2:a}=t;r&&a&&!isNaN(n)&&!isNaN(o)&&n>0&&o>0&&(e.add(r.toUpperCase()),e.add(a.toUpperCase()),s[r]||(s[r]={}),s[a]||(s[a]={}),s[r][a]=o/n,s[a][r]=n/o)}),t(s),g(e)},U=e=>{x(k.filter((t,s)=>s!==e))},D=(e,t,s)=>{let n=[...k];n[e]={...n[e],[t]:s},x(n)};(0,r.useEffect)(()=>{localStorage.setItem("tokenConverter_customPairs",JSON.stringify(k)),A()},[k]),(0,r.useEffect)(()=>{{let e=localStorage.getItem("tokenConverter_history");e&&v(JSON.parse(e));let t=localStorage.getItem("tokenConverter_activeTab");t&&u(t)}},[]),(0,r.useEffect)(()=>{p.length>0&&localStorage.setItem("tokenConverter_history",JSON.stringify(p))},[p]),(0,r.useEffect)(()=>{localStorage.setItem("tokenConverter_activeTab",d)},[d]);let F=e=>{console.log("handleTokenSelect called with value:",e),C(e),"other"===e&&(console.log("Other selected, resetting states"),o(null),N(""),y([]))},I=async e=>{if(console.log("searchToken called with query:",e),N(e),!e||e.length<2){console.log("Query too short, clearing results"),y([]);return}try{i({message:"Searching for token...",type:"loading"});let t=await fetch("https://api.coingecko.com/api/v3/search?query=".concat(e)),s=await t.json();s.coins&&s.coins.length>0?(y(s.coins.slice(0,5)),i({message:"",type:""})):(y([]),i({message:"No matching tokens found",type:"error"}))}catch(e){console.error("Error searching tokens:",e),i({message:"Error searching for tokens. Please try again.",type:"error"}),y([])}},R=e=>{o(e),N("".concat(e.name," (").concat(e.symbol.toUpperCase(),")")),y([]),i({message:"Selected: ".concat(e.name),type:"success"})},[B,O]=(0,r.useState)(""),[J,L]=(0,r.useState)(""),[q,G]=(0,r.useState)(""),[Y,X]=(0,r.useState)(!1),H=async()=>{let e,t;let n=document.getElementById("quick-add-token"),r=document.getElementById("quick-add-currency").value.toLowerCase();if("other"===n.value){if(!s){i({message:"Please select a token from the search results",type:"error"});return}e=s.id,t=s.symbol.toUpperCase()}else{if(!n.value||!r){i({message:"Please select both token and currency",type:"error"});return}t=b[e=n.value]}X(!0),i({message:"Fetching current market rate...",type:"loading"});try{let s=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=".concat(e,"&vs_currencies=").concat(r)),a=await s.json();if(a[e]&&a[e][r]){let s=a[e][r],l=r.toUpperCase();Q(1,t,s,l),i({message:"Successfully added market rate: 1 ".concat(t," = ").concat(s," ").concat(l),type:"success"}),"other"===n.value&&o(null)}else throw Error("Invalid response from API")}catch(e){console.error("Error:",e),i({message:"Error fetching market rate. Please try again later.",type:"error"})}finally{X(!1)}},Q=(0,r.useCallback)((e,t,s,n)=>{x(r=>{let o=[...r,{amount1:e,token1:t,amount2:s,token2:n}];return localStorage.setItem("tokenConverter_customPairs",JSON.stringify(o)),o})},[]),Z=async()=>{let e=document.getElementById("forex-from").value,t=document.getElementById("forex-to").value;if(!e||!t){i({message:"Please select both currencies",type:"error"});return}if(e===t){i({message:"Please select different currencies",type:"error"});return}X(!0),i({message:"Fetching current forex rate...",type:"loading"});try{let s=await fetch("https://api.exchangerate.host/convert?from=".concat(e,"&to=").concat(t)),n=await s.json();if(n.success&&n.result){let s=n.result;Q(1,e,s,t),i({message:"Successfully added forex rate: 1 ".concat(e," = ").concat(s.toFixed(6)," ").concat(t),type:"success"})}else throw Error("Invalid response from API")}catch(e){console.error("Error:",e),i({message:"Error fetching forex rate. Please try again later.",type:"error"})}finally{X(!1)}};return(0,n.jsx)("div",{className:"retro-container",children:(0,n.jsxs)("div",{className:"retro-post",children:[(0,n.jsx)("div",{className:"retro-header",children:"\uD83D\uDCB1 Token Conversion Calculator \uD83D\uDCB9"}),(0,n.jsxs)("div",{className:c().tokenPairsSection,children:[(0,n.jsx)("h3",{className:"nes-text",children:"Custom Token Pairs"}),k.map((e,t)=>(0,n.jsxs)("div",{className:c().tokenPair,children:[(0,n.jsx)("input",{type:"number",className:"nes-input",value:e.amount1,onChange:e=>D(t,"amount1",parseFloat(e.target.value)),placeholder:"Amount",step:"any"}),(0,n.jsx)("input",{type:"text",className:"nes-input",value:e.token1,onChange:e=>D(t,"token1",e.target.value.toUpperCase()),placeholder:"From Token"}),(0,n.jsx)("span",{children:"equals"}),(0,n.jsx)("input",{type:"number",className:"nes-input",value:e.amount2,onChange:e=>D(t,"amount2",parseFloat(e.target.value)),placeholder:"Amount",step:"any"}),(0,n.jsx)("input",{type:"text",className:"nes-input",value:e.token2,onChange:e=>D(t,"token2",e.target.value.toUpperCase()),placeholder:"To Token"}),(0,n.jsx)("button",{className:"nes-btn is-error",onClick:()=>U(t),children:"Remove"})]},t)),(0,n.jsx)("button",{className:"nes-btn is-primary",onClick:()=>{x([...k,{amount1:1,token1:"",amount2:"",token2:""}])},children:"Add Token Pair"})]}),(0,n.jsxs)("div",{className:c().allConversions,children:[(0,n.jsx)("h3",{className:"nes-text",children:"All Available Conversions (Base 1)"}),(0,n.jsx)("div",{className:c().conversionGrid,children:Array.from(f).sort().map(e=>Array.from(f).sort().map(t=>{if(e!==t){let s=w(e,t);if(null!==s)return(0,n.jsxs)("div",{className:c().conversionRow,children:["1 ",e," = ",s.toFixed(8)," ",t]},"".concat(e,"-").concat(t))}return null}))})]}),(0,n.jsxs)("div",{className:"quick-add retro-section",children:[(0,n.jsxs)("div",{className:"tab-buttons",children:[(0,n.jsx)("button",{onClick:()=>u("crypto"),className:"nes-btn ".concat("crypto"===d?"is-primary":""),children:"Crypto"}),(0,n.jsx)("button",{onClick:()=>u("forex"),className:"nes-btn ".concat("forex"===d?"is-primary":""),children:"Forex"})]}),(0,n.jsxs)("div",{className:"nes-container with-title is-dark",children:[(0,n.jsx)("p",{className:"title",children:"Quick Add Rates"}),"crypto"===d&&(0,n.jsxs)("div",{className:"crypto-rate-section",children:[(0,n.jsx)("h4",{children:"Add Cryptocurrency Rate"}),(0,n.jsxs)("div",{className:c().tokenPair,children:[(0,n.jsxs)("select",{id:"quick-add-token",className:"nes-select",onChange:e=>{C(e.target.value),F(e.target.value)},children:[(0,n.jsx)("option",{value:"",children:"Select Token"}),Object.entries(b).map(e=>{let[t,s]=e;return(0,n.jsxs)("option",{value:t,children:[s," - ",t]},t)}),(0,n.jsx)("option",{value:"other",children:"Other (Search)"})]}),(0,n.jsxs)("select",{id:"quick-add-currency",className:"nes-select",children:[(0,n.jsx)("option",{value:"usd",children:"USD"}),(0,n.jsx)("option",{value:"eur",children:"EUR"}),(0,n.jsx)("option",{value:"gbp",children:"GBP"}),(0,n.jsx)("option",{value:"jpy",children:"JPY"}),(0,n.jsx)("option",{value:"php",children:"PHP"})]}),(0,n.jsx)("button",{className:"nes-btn is-primary",onClick:H,disabled:Y,children:Y?"Loading...":"Add Market Rate"})]}),(0,n.jsxs)("div",{style:{color:"yellow",fontSize:"12px"},children:["Current tokenSelect value: ",S]}),"other"===S&&(0,n.jsxs)("div",{className:c().customTokenInput,children:[(0,n.jsxs)("div",{className:"nes-field",children:[(0,n.jsx)("label",{htmlFor:"tokenSearch",children:"Search for token:"}),(0,n.jsx)("input",{id:"tokenSearch",type:"text",className:"nes-input is-dark",value:_,placeholder:"Search token (e.g., POL, KAS)",onChange:e=>I(e.target.value)})]}),j.length>0&&(0,n.jsx)("div",{className:c().tokenSearchResults,children:j.map(e=>(0,n.jsxs)("div",{className:c().tokenSearchResult,onClick:()=>R(e),children:[e.name," (",e.symbol.toUpperCase(),")",(0,n.jsxs)("small",{children:["ID: ",e.id]})]},e.id))})]})]}),"forex"===d&&(0,n.jsxs)("div",{className:"forex-rate-section",children:[(0,n.jsx)("h4",{children:"Add Forex Rate"}),(0,n.jsxs)("div",{className:c().tokenPair,children:[(0,n.jsxs)("select",{id:"forex-from",className:"nes-select",value:J,onChange:e=>L(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Select Currency"}),(0,n.jsx)("option",{value:"USD",children:"US Dollar (USD)"}),(0,n.jsx)("option",{value:"EUR",children:"Euro (EUR)"}),(0,n.jsx)("option",{value:"GBP",children:"British Pound (GBP)"}),(0,n.jsx)("option",{value:"JPY",children:"Japanese Yen (JPY)"}),(0,n.jsx)("option",{value:"AUD",children:"Australian Dollar (AUD)"})]}),(0,n.jsx)("span",{children:"to"}),(0,n.jsxs)("select",{id:"forex-to",className:"nes-select",value:q,onChange:e=>G(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Select Currency"}),(0,n.jsx)("option",{value:"USD",children:"US Dollar (USD)"}),(0,n.jsx)("option",{value:"EUR",children:"Euro (EUR)"}),(0,n.jsx)("option",{value:"GBP",children:"British Pound (GBP)"}),(0,n.jsx)("option",{value:"JPY",children:"Japanese Yen (JPY)"}),(0,n.jsx)("option",{value:"AUD",children:"Australian Dollar (AUD)"})]}),(0,n.jsx)("button",{className:"nes-btn is-primary",onClick:Z,disabled:Y,children:Y?"Loading...":"Add Forex Rate"})]})]}),l.message&&(0,n.jsx)("div",{className:"nes-container is-rounded ".concat("error"===l.type?"is-error":"success"===l.type?"is-success":"is-dark"),children:(0,n.jsx)("p",{children:l.message})})]}),(0,n.jsxs)("div",{className:"converter-form nes-container with-title",children:[(0,n.jsx)("p",{className:"title",children:"Convert"}),(0,n.jsxs)("div",{className:"nes-field",children:[(0,n.jsx)("label",{htmlFor:"amount",children:"Amount:"}),(0,n.jsx)("input",{type:"number",id:"amount",className:"nes-input",value:B,onChange:e=>O(e.target.value),placeholder:"Enter amount"})]}),"crypto"===d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"nes-field",children:[(0,n.jsx)("label",{htmlFor:"fromToken",className:c().tokenLabel,children:"From Token:"}),(0,n.jsxs)("select",{id:"fromToken",className:"nes-select ".concat(c().tokenSelect),onChange:e=>L(e.target.value),value:J,children:[(0,n.jsx)("option",{value:"",children:"Select token"}),Array.from(f).sort().map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{className:"nes-field",children:[(0,n.jsx)("label",{htmlFor:"toToken",className:c().tokenLabel,children:"To Token:"}),(0,n.jsxs)("select",{id:"toToken",className:"nes-select ".concat(c().tokenSelect),onChange:e=>G(e.target.value),value:q,children:[(0,n.jsx)("option",{value:"",children:"Select token"}),Array.from(f).sort().map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"nes-field",children:[(0,n.jsx)("label",{htmlFor:"fromToken",className:c().tokenLabel,children:"From Token:"}),(0,n.jsxs)("select",{id:"fromToken",className:"nes-select ".concat(c().tokenSelect),onChange:e=>L(e.target.value),value:J,children:[(0,n.jsx)("option",{value:"",children:"Select token"}),Array.from(f).sort().map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{className:"nes-field",children:[(0,n.jsx)("label",{htmlFor:"toToken",className:c().tokenLabel,children:"To Token:"}),(0,n.jsxs)("select",{id:"toToken",className:"nes-select ".concat(c().tokenSelect),onChange:e=>G(e.target.value),value:q,children:[(0,n.jsx)("option",{value:"",children:"Select token"}),Array.from(f).sort().map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}),(0,n.jsx)("button",{className:"nes-btn is-primary",onClick:()=>{if(!B||!J||!q){i({message:"Please fill in all fields",type:"error"});return}let e=w(J,q);if(null!==e){let t=(parseFloat(B)*e).toFixed(8);m("".concat(B," ").concat(J," = ").concat(t," ").concat(q));let s={amount:B,from:J,to:q,result:t,timestamp:new Date().toISOString()};v(e=>[s,...e]),i({message:"Conversion successful!",type:"success"})}else i({message:"No conversion rate available for these tokens",type:"error"})},disabled:Y,children:"Convert"}),h&&(0,n.jsx)("div",{className:"nes-container is-rounded is-dark",children:(0,n.jsxs)("p",{children:["Result: ",h]})})]}),p.length>0&&(0,n.jsxs)("div",{className:"conversion-history nes-container with-title",children:[(0,n.jsx)("p",{className:"title",children:"Conversion History"}),(0,n.jsx)("div",{className:"history-list",children:p.map((e,t)=>(0,n.jsx)("div",{className:"nes-container is-rounded",children:(0,n.jsxs)("p",{children:[e.amount," ",e.from," = ",e.result," ",e.to,(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:new Date(e.timestamp).toLocaleString()})]})},t))})]})]}),(0,n.jsx)("div",{className:"retro-section",children:(0,n.jsx)(a(),{href:"/",className:"nes-btn",children:"Back to Home"})})]})})}},4755:function(e){e.exports={"converter-form":"TokenConverter_converter-form__pWqYW",tokenPairsSection:"TokenConverter_tokenPairsSection__bbXJT",tokenPair:"TokenConverter_tokenPair__rh8er","nes-select":"TokenConverter_nes-select__XEju8",cryptoSelect:"TokenConverter_cryptoSelect__fmian","nes-field":"TokenConverter_nes-field__C7_GA","conversion-history":"TokenConverter_conversion-history__Q_ZSF",allConversions:"TokenConverter_allConversions__HIZnL",conversionGrid:"TokenConverter_conversionGrid__0bVNP",conversionRow:"TokenConverter_conversionRow__3Rq_r","history-list":"TokenConverter_history-list__qrNqN",customTokenInput:"TokenConverter_customTokenInput__N1JX3",show:"TokenConverter_show__fNsfu",tokenSearchResults:"TokenConverter_tokenSearchResults__rH15e",tokenSearchResult:"TokenConverter_tokenSearchResult__m_40w","tab-buttons":"TokenConverter_tab-buttons__eB3Xp",cryptoLabel:"TokenConverter_cryptoLabel__TyDTO","status-message":"TokenConverter_status-message__V7Evj","result-container":"TokenConverter_result-container__GZ0TL"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5074)}),_N_E=e.O()}]);