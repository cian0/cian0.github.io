(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{3300:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/autospeechrecognition",function(){return r(8458)}])},8458:function(e,s,r){"use strict";r.r(s);var t=r(5893),a=r(7294);r(1664),s.default=()=>{let[e,s]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(0),h=(0,a.useRef)(null),[p,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{h.current||(console.log("Main: Creating new worker"),h.current=new Worker(r.tu(new URL(r.p+r.u(304),r.b)),{type:void 0}),h.current.onmessage=e=>{console.log("Main: Received message from worker",e.data),"ready"===e.data.status?(d(!0),c(!1)):"complete"===e.data.status?(s(e.data.output),c(!1)):"error"===e.data.status?(o(e.data.error),c(!1)):"progress"===e.data.status&&m(e.data.progress||0)},h.current.onerror=e=>{console.error("Main: Worker error",e),o("Worker error: "+e.message),c(!1)},h.current.postMessage({command:"load_model"}))},[]);let g=async()=>{if(!p){o("Please select an audio file first.");return}console.log("Main: Starting transcription"),c(!0),o(null),s(null);try{let e=await p.arrayBuffer(),s=new(window.AudioContext||window.webkitAudioContext),r=(await s.decodeAudioData(e)).getChannelData(0);h.current.postMessage({command:"transcribe",audioData:r},[r.buffer])}catch(e){console.error("Error processing audio file:",e),o("Error processing audio file: "+e.message),c(!1)}};return(0,t.jsx)("div",{className:"retro-container",children:(0,t.jsxs)("div",{className:"retro-post",children:[(0,t.jsx)("div",{className:"retro-header",children:"\uD83C\uDF99️ Retro Speech Recognition \uD83D\uDDA5️"}),(0,t.jsxs)("div",{className:"retro-section",children:[(0,t.jsx)("p",{className:"retro-text",children:"Welcome to the Retro Speech Recognition!"}),(0,t.jsx)("p",{className:"retro-text",children:"Transform your audio into text with our cutting-edge 8-bit technology."})]}),!l&&(0,t.jsxs)("div",{className:"retro-section",children:[(0,t.jsx)("div",{className:"nes-progress is-primary",children:(0,t.jsx)("progress",{value:u,max:"100"})}),(0,t.jsxs)("p",{className:"retro-text",children:["Loading model: ",u.toFixed(2),"%"]})]}),(0,t.jsxs)("div",{className:"retro-section",children:[(0,t.jsxs)("label",{className:"nes-btn",children:[(0,t.jsx)("span",{children:"Select Audio File"}),(0,t.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{x(e.target.files[0])},style:{display:"none"}})]}),p&&(0,t.jsxs)("p",{className:"retro-text",children:["Selected: ",p.name]})]}),(0,t.jsx)("div",{className:"retro-section",children:(0,t.jsx)("button",{onClick:g,disabled:!l||i||!p,className:"nes-btn ".concat(l&&!i&&p?"is-primary":"is-disabled"),children:i?"Decoding...":"Transcribe Audio"})}),n&&(0,t.jsx)("div",{className:"nes-container is-rounded is-error",children:(0,t.jsx)("p",{className:"retro-text",children:n})}),e&&(0,t.jsx)("div",{className:"retro-section",children:(0,t.jsxs)("div",{className:"nes-container is-rounded with-title",children:[(0,t.jsx)("p",{className:"title",children:"Transcription Result"}),(0,t.jsx)("p",{className:"retro-text",children:JSON.stringify(e,null,2)})]})})]})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3300)}),_N_E=e.O()}]);