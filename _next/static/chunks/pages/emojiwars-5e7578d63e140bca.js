(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{2830:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/emojiwars",function(){return a(5349)}])},5349:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var r=a(5893),o=a(7294),s=a(1664),n=a.n(s),l=a(4165),i=a.n(l),c=()=>{let e=(0,o.useRef)(null),[t,a]=(0,o.useState)(!1),[s,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(""),h=(0,o.useMemo)(()=>({INITIAL_EMOJI_COUNT:200,MAX_SPEED:300,EMOJI_SIZE:24,WORLD_WIDTH:1600,WORLD_HEIGHT:1200,SEPARATION_DISTANCE:30,ALIGNMENT_DISTANCE:50,COHESION_DISTANCE:70,MAX_FORCE:1.5,WANDER_STRENGTH:500,PREY_ATTRACTION_STRENGTH:5e3,POWER_UP_DURATION:5e3,POWER_UP_SPAWN_INTERVAL:200,NINJA_POWER_UP_SPAWN_INTERVAL:100,TILE_SIZE:64,CELL_SIZE:100}),[]),d=(0,o.useMemo)(()=>["\uD83D\uDDFF","\uD83D\uDCC4","✂️","\uD83D\uDD25","\uD83D\uDCA7","\uD83C\uDF31"],[]),D=(0,o.useMemo)(()=>({ground:"\uD83D\uDFEB",grass:"\uD83D\uDFE9",water:"\uD83D\uDFE6",sand:"\uD83D\uDFE8",mountain:"⛰️"}),[]),y=(0,o.useMemo)(()=>({"\uD83D\uDDFF":["✂️","\uD83D\uDD25"],"\uD83D\uDCC4":["\uD83D\uDDFF","\uD83D\uDCA7"],"✂️":["\uD83D\uDCC4","\uD83C\uDF31"],"\uD83D\uDD25":["\uD83D\uDCC4","\uD83C\uDF31"],"\uD83D\uDCA7":["\uD83D\uDD25","\uD83D\uDDFF"],"\uD83C\uDF31":["\uD83D\uDCA7","✂️"]}),[]);(0,o.useEffect)(()=>{if(t){let e=document.createElement("script");return e.src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js",e.async=!0,document.body.appendChild(e),e.onload=p,()=>{document.body.removeChild(e)}}},[t]);let p=()=>{let t={type:Phaser.AUTO,width:e.current.clientWidth,height:e.current.clientHeight,parent:e.current,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:w,create:C,update:N},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}},a=new Phaser.Game(t),r=()=>{a.scale.resize(e.current.clientWidth,e.current.clientHeight)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),a.destroy(!0)}},x,E,_,m={},f={},w=function(){},C=function(){this.cameras.main.setBounds(0,0,h.WORLD_WIDTH,h.WORLD_HEIGHT),this.physics.world.setBounds(0,0,h.WORLD_WIDTH,h.WORLD_HEIGHT),g(this),x=this.physics.add.group(),E=this.physics.add.group(),_=this.physics.add.group(),d.forEach(e=>f[e]=0);for(let e=0;e<h.INITIAL_EMOJI_COUNT;e++)M(this);this.physics.add.collider(x,x,R,null,this),this.physics.add.overlap(x,_,v,null,this),this.physics.add.overlap(x,E,I,null,this);let e=this.add.circle(h.WORLD_WIDTH/2,h.WORLD_HEIGHT/2,1,16777215,0);this.cameras.main.startFollow(e,!0,.05,.05),this.time.addEvent({delay:5e3,callback:z,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e4,callback:J,callbackScope:this,loop:!0}),this.time.addEvent({delay:h.POWER_UP_SPAWN_INTERVAL,callback:()=>T(this),callbackScope:this,loop:!0}),this.time.addEvent({delay:h.NINJA_POWER_UP_SPAWN_INTERVAL,callback:()=>j(this),callbackScope:this,loop:!0})},N=function(){if(O(),x.getChildren().forEach(e=>{e.active&&(A(e),e.x=Phaser.Math.Wrap(e.x,0,h.WORLD_WIDTH),e.y=Phaser.Math.Wrap(e.y,0,h.WORLD_HEIGHT),e.getData("ninjaPowerUp")?e.setScale(1.8):e.getData("powerUp")?e.setScale(1.5):e.setScale(1))}),this.physics.world.collide(x,x,R,null,this),this.time.now%60==0&&Z(),this.time.now%300==0){let e=Object.keys(f).filter(e=>f[e]>0);1===e.length&&(l(e[0]),this.scene.pause())}},g=e=>{let{WORLD_WIDTH:t,WORLD_HEIGHT:a,TILE_SIZE:r}=h;for(let o=0;o<t;o+=r)for(let t=0;t<a;t+=r){let a=P(Y(.05*o,.05*t));e.add.text(o,t,a,{fontSize:"".concat(r,"px")}).setOrigin(0)}},P=e=>e<-1.5?D.water:e<-1.2?D.mountain:e<-.8?D.sand:e<2?D.grass:D.ground,M=(e,t,a)=>{let{WORLD_WIDTH:r,WORLD_HEIGHT:o,EMOJI_SIZE:s}=h;t=t||Phaser.Math.Between(0,r),a=a||Phaser.Math.Between(0,o);let n=Phaser.Math.RND.pick(d),l=e.add.text(t,a,n,{fontSize:"24px"}).setOrigin(.5);return e.physics.add.existing(l),l.body.setCircle(s/2),l.body.setCollideWorldBounds(!0),l.body.setBounce(1,1),l.setData("type",n),l.setData("powerUp",!1),x.add(l),f[n]++,l},T=e=>{let{WORLD_WIDTH:t,WORLD_HEIGHT:a,EMOJI_SIZE:r}=h,o=Phaser.Math.Between(0,t),s=Phaser.Math.Between(0,a),n=e.add.text(o,s,"⭐",{fontSize:"24px"}).setOrigin(.5);e.physics.add.existing(n),n.body.setCircle(r/2),E.add(n)},j=e=>{let{WORLD_WIDTH:t,WORLD_HEIGHT:a,EMOJI_SIZE:r}=h,o=Phaser.Math.Between(0,t),s=Phaser.Math.Between(0,a),n=e.add.text(o,s,"\uD83E\uDD77",{fontSize:"24px"}).setOrigin(.5);e.physics.add.existing(n),n.body.setCircle(r/2),_.add(n)},v=(e,t)=>{let{POWER_UP_DURATION:a}=h;t.destroy(),e.setData("ninjaPowerUp",!0),e.scene.time.delayedCall(a,()=>{e.setData("ninjaPowerUp",!1)})},I=(e,t)=>{let{POWER_UP_DURATION:a}=h;t.destroy(),e.setData("powerUp",!0),e.scene.time.delayedCall(a,()=>{e.setData("powerUp",!1)})},R=(e,t)=>{let a=e.getData("type"),r=t.getData("type");e.getData("ninjaPowerUp")?(S(t,a),b(e,t)):t.getData("ninjaPowerUp")?(S(e,r),b(t,e)):y[a].includes(r)?t.getData("powerUp")||(S(t,a),b(e,t)):y[r].includes(a)?e.getData("powerUp")||(S(e,r),b(t,e)):b(e,t)},S=(e,t)=>{let a=e.getData("type");f[a]--,f[t]++,e.setData("type",t),e.setText(t)},b=(e,t)=>{let a=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y);e.body.velocity.x-=1*Math.cos(a),e.body.velocity.y-=1*Math.sin(a),t.body.velocity.x+=1*Math.cos(a),t.body.velocity.y+=1*Math.sin(a)},O=()=>{m={};let{CELL_SIZE:e}=h;x.getChildren().forEach(t=>{let a=Math.floor(t.x/e),r=Math.floor(t.y/e),o="".concat(a,",").concat(r);m[o]||(m[o]=[]),m[o].push(t)})},A=e=>{let t=B(e);if(t.length>0){let a=W(e,t),r=H(e,t),o=F(e,t),s=U(),n=k(e),{MAX_SPEED:l}=h;e.body.velocity.x+=1.5*a.x+r.x+o.x+s.x+n.x,e.body.velocity.y+=1.5*a.y+r.y+o.y+s.y+n.y;let i=Math.sqrt(e.body.velocity.x**2+e.body.velocity.y**2);i>l&&(e.body.velocity.x=e.body.velocity.x/i*l,e.body.velocity.y=e.body.velocity.y/i*l)}},B=e=>{let{CELL_SIZE:t,COHESION_DISTANCE:a}=h,r=Math.floor(e.x/t),o=Math.floor(e.y/t),s=[];for(let t=-1;t<=1;t++)for(let n=-1;n<=1;n++){let l="".concat(r+t,",").concat(o+n);m[l]&&m[l].forEach(t=>{t!==e&&Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<a&&e.getData("type")===t.getData("type")&&s.push(t)})}return s},W=(e,t)=>{let a={x:0,y:0},{SEPARATION_DISTANCE:r}=h;return t.forEach(t=>{let o=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);if(o<r){let r={x:e.x-t.x,y:e.y-t.y};a.x+=r.x/o,a.y+=r.y/o}}),L(a)},H=(e,t)=>{let a={x:0,y:0};return t.length>0&&(t.forEach(e=>{a.x+=e.body.velocity.x,a.y+=e.body.velocity.y}),a.x/=t.length,a.y/=t.length),L(a)},F=(e,t)=>{let a={x:0,y:0};return t.length>0&&(t.forEach(e=>{a.x+=e.x,a.y+=e.y}),a.x/=t.length,a.y/=t.length,a.x-=e.x,a.y-=e.y),L(a)},L=e=>{let{MAX_FORCE:t}=h,a=Math.sqrt(e.x**2+e.y**2);return a>t&&(e.x=e.x/a*t,e.y=e.y/a*t),e},U=()=>{let{WANDER_STRENGTH:e}=h;return{x:(Math.random()-.5)*e,y:(Math.random()-.5)*e}},k=e=>{let t=G(e);if(t){let a=t.x-e.x,r=t.y-e.y,o=Math.sqrt(a*a+r*r),{PREY_ATTRACTION_STRENGTH:s}=h;return{x:a/o*s,y:r/o*s}}return{x:0,y:0}},G=e=>{let t=null,a=1/0,{CELL_SIZE:r}=h,o=Math.floor(e.x/r),s=Math.floor(e.y/r);for(let r=-1;r<=1;r++)for(let n=-1;n<=1;n++){let l="".concat(o+r,",").concat(s+n);m[l]&&m[l].forEach(r=>{if(e!==r&&y[e.getData("type")].includes(r.getData("type"))){let o=Phaser.Math.Distance.Between(e.x,e.y,r.x,r.y);o<a&&(a=o,t=r)}})}return t},z=function(){let{WORLD_WIDTH:e,WORLD_HEIGHT:t}=h,a=Phaser.Math.Between(0,e),r=Phaser.Math.Between(0,t);this.cameras.main.pan(a,r,5e3,"Sine.easeInOut")},J=function(){let e=Phaser.Math.FloatBetween(.5,1.5);this.cameras.main.zoomTo(e,5e3,"Sine.easeInOut")},Z=()=>{let e=["\uD83D\uDD22 Emoji Counts:"];d.forEach(t=>{e.push("  ".concat(t,": ").concat(f[t]))}),e.push(""),e.push("\uD83E\uDDB8 Active Emojis: ".concat(x.countActive())),e.push("⭐ Power-ups: ".concat(E.countActive())),e.push("\uD83E\uDD77 Ninja Power-ups: ".concat(_.countActive())),u(e.join("\n"))},V=Array(512),X=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let e=0;e<256;e++)V[e]=V[e+256]=X[e];let q=(e,t,a)=>{let r=15&e,o=1+(7&r);return(8&r?-o:o)*t+(4&r?-o:o)*a},Y=(e,t)=>{let a=255&Math.floor(e),r=255&Math.floor(t);e-=Math.floor(e),t-=Math.floor(t);let o=K(e),s=K(t),n=V[a]+r,l=V[a+1]+r;return Q(s,Q(o,q(V[n],e,t),q(V[l],e-1,t)),Q(o,q(V[n+1],e,t-1),q(V[l+1],e-1,t-1)))},Q=(e,t,a)=>t+e*(a-t),K=e=>e*e*e*(e*(6*e-15)+10);return(0,r.jsx)("div",{className:i().retroContainer,children:(0,r.jsxs)("div",{className:i().retroPost,children:[(0,r.jsx)("div",{className:i().retroHeader,children:"\uD83C\uDFAE Emoji Battle Royale \uD83C\uDFC6"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:e,className:i().gameContainer,style:{width:"100%",height:"calc(100vh - 200px)",maxHeight:"600px",overflow:"hidden"}}),(0,r.jsx)("div",{className:i().retroSection,children:(0,r.jsx)("pre",{className:i().debugInfo,children:c})}),s&&(0,r.jsx)("div",{className:i().retroSection,children:(0,r.jsxs)("p",{className:i().retroText,children:[s," Wins the Battle!"]})})]}):(0,r.jsxs)("div",{className:i().retroSection,children:[(0,r.jsx)("p",{className:i().retroText,children:"Ready to enter the emoji arena?"}),(0,r.jsx)("p",{className:i().retroText,children:"New feature: Ninja power-up! \uD83E\uDD77 Defeat any emoji!"}),(0,r.jsx)("button",{className:i().retroButton,onClick:()=>a(!0),children:"\uD83D\uDE80 Start Battle"})]}),(0,r.jsx)("div",{className:i().retroSection,children:(0,r.jsx)(n(),{href:"/",className:i().retroButton,children:"\uD83C\uDFE0 Return to Cyberhome"})})]})})},u=()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Emoji Wars"}),(0,r.jsx)(c,{})]})},4165:function(e){e.exports={retroContainer:"EmojiBattleRoyale_retroContainer__ewt_I",retroPost:"EmojiBattleRoyale_retroPost__8Ymnd",retroHeader:"EmojiBattleRoyale_retroHeader__QhU4r",retroSection:"EmojiBattleRoyale_retroSection__kGZhH",retroText:"EmojiBattleRoyale_retroText__wiBr3",retroButton:"EmojiBattleRoyale_retroButton__wuP2Z",gameContainer:"EmojiBattleRoyale_gameContainer__wY0Rk"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2830)}),_N_E=e.O()}]);